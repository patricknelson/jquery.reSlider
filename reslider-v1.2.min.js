/*!
* reSlider v1.2
* Copyright (c) 2013 Brandon Miller
* Dual licensed under the MIT and GPL licenses:
* http://www.opensource.org/licenses/mit-license.php
* http://www.gnu.org/licenses/gpl.html
**/
(function(e){e.fn.reSlider=function(t){var n=e(this),r=n.find(".reslider"),i=n.find(".reslider > li"),s=i.length,o=-1,u="",a="",f="",l="",c="",h="",p=false,d=false;var v={speed:500,delay:9e3,animation:"fade",buildBulletNav:true,buildDirNav:true,autoPlay:true};if(s<=1)return;var m=e.extend({},v,t);r.css({overflow:"visible"});var g={buildBulletNav:function(){var t="",u;for(var h=0;h<s;h++){u=h+1;t+='<span class="bullet-link">'+u+"</span>"}n.append('<div class="reslider-nav">'+t+"</div>");l=n.find(".reslider-nav");c=l.find(".bullet-link");c.eq(0).addClass("current");c.on("click",function(){var t=e(this).index();a=r.find(e(".current"));f=e(i[t]);if(a.index()!==f.index()){o=t-2;p=true;g.delayTimer("clear");m.animation()}})},buildDirNav:function(){n.append('<div class="dir-nav"><span class="dir-link prev">&laquo;</span> <span class="dir-link next">&raquo;</span></div>');e(".dir-nav .prev").on("click",function(){o=o-2;d=true;g.delayTimer("clear");m.animation()});e(".dir-nav .next").on("click",function(){g.delayTimer("clear");m.animation()})},setWidths:function(){var t=s*100+"%",n=100/s;r.width(t);i.each(function(){e(this).outerWidth(n+"%")})},orderNav:function(){if(h==="carousel"){var e=o>=s-4?0:o+2}else{var e=o>=s-2?0:o+2}c.removeClass("current");c.eq(e).addClass("current")},pauseSlider:function(){r.mouseover(function(){g.delayTimer("clear")});r.mouseout(function(){g.delayTimer()})},carousel:function(){if(m.buildBulletNav)g.orderNav();o++;r.animate({left:"-"+(o+2)+"00%"},m.speed,function(){if(o>=s-3){r.css({left:"-100%"});o=-1}if(o<-1){r.css({left:"-"+(s-2)+"00%"});o=s-4}});g.delayTimer()},slide:function(){if(m.buildBulletNav)g.orderNav();o++;if(o===s-1){r.animate({left:"0"},m.speed);o=-1;g.delayTimer()}else if(o<-1){r.animate({left:"-"+(s-1)+"00%"},m.speed);o=s-2;g.delayTimer()}else{r.animate({left:"-"+(o+1)+"00%"},m.speed);g.delayTimer()}},fade:function(){if(m.buildBulletNav)g.orderNav();o++;if(!p){if(o===s-1){a=e(i[o]);f=e(i[0]);o=-1}else if(o<-1){a=e(i[0]);f=e(i[s-1]);o=s-2}else{a=d?e(i[o+2]):e(i[o]);f=e(i[o+1])}}f.show(0,function(){a.fadeOut(m.speed,function(){a.removeClass("current");f.addClass("current");g.delayTimer()})});p=false;d=false},animControl:function(){h=m.animation;switch(h){case"fade":m.animation=g.fade;n.addClass("rs-fade");i.eq(0).addClass("current");i.not(":eq(0)").hide();break;case"slide":m.animation=g.slide;g.setWidths();n.addClass("rs-slide");break;case"carousel":m.animation=g.carousel;n.addClass("rs-slide");i.eq(0).clone().appendTo(r);i.eq(s-1).clone().prependTo(r);r.css({left:"-100%"});i=n.find(".reslider > li");s=i.length;r.width(s*100+"%");i.each(function(){e(this).outerWidth(100/s+"%")});break}g.delayTimer()},clearDelay:function(){clearTimeout(u)},delayTimer:function(e){if(m.autoPlay){g.clearDelay();if(e===undefined||null)u=setTimeout(m.animation,m.delay)}},init:function(){if(m.buildBulletNav)g.buildBulletNav();if(m.buildDirNav)g.buildDirNav();r.wrap('<div class="reslider-inner"></div>');g.animControl();g.pauseSlider()}};g.init()}})(jQuery);
